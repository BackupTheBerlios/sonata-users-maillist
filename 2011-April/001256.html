<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sonata-users] Lyricwiki patch
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sonata-users/2011-April/index.html" >
   <LINK REL="made" HREF="mailto:sonata-users%40lists.berlios.de?Subject=Re%3A%20%5BSonata-users%5D%20Lyricwiki%20patch&In-Reply-To=%3C8ca9dfec23bdc5163eddbf05aa53a7f2%40dreamysource.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001255.html">
   <LINK REL="Next"  HREF="001257.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sonata-users] Lyricwiki patch</H1>
    <B>pyrsmk</B> 
    <A HREF="mailto:sonata-users%40lists.berlios.de?Subject=Re%3A%20%5BSonata-users%5D%20Lyricwiki%20patch&In-Reply-To=%3C8ca9dfec23bdc5163eddbf05aa53a7f2%40dreamysource.fr%3E"
       TITLE="[Sonata-users] Lyricwiki patch">pyrsmk at dreamysource.fr
       </A><BR>
    <I>Wed Apr 27 18:36:14 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001255.html">[Sonata-users] Lyricwiki patch
</A></li>
        <LI>Next message: <A HREF="001257.html">[Sonata-users] Translators needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1256">[ date ]</a>
              <a href="thread.html#1256">[ thread ]</a>
              <a href="subject.html#1256">[ subject ]</a>
              <a href="author.html#1256">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Hi,

 Many months ago, when the projet seemed to migrate to codingteam, I 
 remember I've filed a bug. The bug is still not confirmed. And the 
 global stats of the bugs have not changed at all too. The project seems 
 to be dead. Hopefully, the mailing list show me that some people loves 
 sonata and continue to work on it ^^

 Maybe sonata will need a fork, until paco's team show us a life sign... 
 Yes, I know, there's already a fork on github. I mean a real fork of the 
 project with a new development team.

 On Wed, 27 Apr 2011 19:22:40 +0300, KL-7 wrote:
&gt;<i> Sure, I dont expect the answer about project activity from you =) As
</I>&gt;<i> its a public mail list I hope someone else might share this
</I>&gt;<i> information with us. Summer is coming and may be Ill be able to 
</I>&gt;<i> resume
</I>&gt;<i> my last year work on sonata and make some more fixes and small
</I>&gt;<i> enhancements so itd be nice to know what is the projects state now.
</I>&gt;<i>
</I>&gt;<i> And what about LyricsWiki changes, I still use sonata as my primary
</I>&gt;<i> music player under ubuntu and I like to look through songs lyrics 
</I>&gt;<i> once
</I>&gt;<i> in a while. So if I notice something is broken be sure Ill try to fix
</I>&gt;<i> it and commit to github =)
</I>&gt;<i>
</I>&gt;<i> On Wed, Apr 27, 2011 at 7:10 PM, Lazaros Koromilas  wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On Wed, Apr 27, 2011 at 6:46 PM, KL-7 wrote:
</I>&gt;&gt;<i> &gt; Hi,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I believe this one will do the trick.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Lazaros, I suggest you to look through commits in multanis and my
</I>&gt;&gt;<i> repos.
</I>&gt;&gt;<i> &gt; You might find some useful fixes there.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; And I wonder how things are going with sonata. I dont see much
</I>&gt;&gt;<i> activity of
</I>&gt;&gt;<i> &gt; Pacos team on codingteam. Did they move the repo somewhere else
</I>&gt;&gt;<i> or finally
</I>&gt;&gt;<i> &gt; decide against resurrecting sonata project?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi again,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> These are some very helpful fixes; thank you.
</I>&gt;&gt;<i> I dont have a clue about the projects activity/decisions.
</I>&gt;&gt;<i> I will try to contribute through here as a first step ;)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Lazaros.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; On Wed, Apr 27, 2011 at 2:39 PM, Lazaros Koromilas
</I>&gt;&gt;<i> &gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; On Tue, Apr 26, 2011 at 7:35 PM, KL-7 wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt; Hi,
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; Something really strange happened with their markup lately, so
</I>&gt;&gt;<i> thank you
</I>&gt;&gt;<i> &gt;&gt; &gt; for
</I>&gt;&gt;<i> &gt;&gt; &gt; sharing your patch. Though, I used this one for myself. It
</I>&gt;&gt;<i> avoids
</I>&gt;&gt;<i> &gt;&gt; &gt; splitting
</I>&gt;&gt;<i> &gt;&gt; &gt; string with the tag that contains simultaneously escaped &lt; and
</I>&gt;&gt;<i> &gt;&gt; &gt; unescaped
</I>&gt;&gt;<i> &gt;&gt; &gt; &gt; as it looks a bit unstable for me.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Yep! This seems much better, thanks ;)
</I>&gt;&gt;<i> &gt;&gt; Another thing that needs attention is the capitalization rules,
</I>&gt;&gt;<i> for
</I>&gt;&gt;<i> &gt;&gt; instance
</I>&gt;&gt;<i> &gt;&gt; for the song &quot;Orchestral Manoeuvres In The Dark - Shes Leaving&quot;
</I>&gt;&gt;<i> sonata
</I>&gt;&gt;<i> &gt;&gt; will get the page:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27S%20Leaving&amp;action=edit">http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27S%20Leaving&amp;action=edit</A>
</I>&gt;&gt;<i> [4]
</I>&gt;&gt;<i> &gt;&gt; whereas the logical would be:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27s%20Leaving&amp;action=edit">http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27s%20Leaving&amp;action=edit</A>
</I>&gt;&gt;<i> [5]
</I>&gt;&gt;<i> &gt;&gt; where the lyrics actually exist.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; On Tue, Apr 26, 2011 at 7:08 PM, Lazaros Koromilas
</I>&gt;&gt;<i> &gt;&gt; &gt; wrote:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Lyrics fetching was not functional lately,
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; some changes in the markup apparently.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; This patch fixes it.
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; diff --git a/sonata/lyricwiki.py b/sonata/lyricwiki.py
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; index 0cd07fc..d4055c1 100644
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; --- a/sonata/lyricwiki.py
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; +++ b/sonata/lyricwiki.py
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; @@ -42,10 +42,9 @@ class LyricWiki(object):
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; &#160; &#160; &#160; &#160; &#160; &#160; if content[:len(redir_tag)].lower() ==
</I>&gt;&gt;<i> redir_tag:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; addr =
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; &quot;<A HREF="http://lyricwiki.org/index.php?title=%s&amp;action=edit">http://lyricwiki.org/index.php?title=%s&amp;action=edit</A> [7]&quot; %
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; urllib.quote(content.split(&quot;[[&quot;)[1].split(&quot;]]&quot;)[0])
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; lyricpage =
</I>&gt;&gt;<i> urllib.urlopen(addr).read()
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; - &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;content = re.split(&quot;]*&gt;&quot;,
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; lyricpage)[1].split(&quot;&quot;)[0]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; - &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;content = content.strip()
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; - &#160; &#160; &#160; &#160; &#160; &#160;lyrics =
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;<i> content.split(&quot;&lt;lyrics&gt;&quot;)[1].split(&quot;&lt;/lyrics&gt;&quot;)[0]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; - &#160; &#160; &#160; &#160; &#160; &#160;if lyrics.strip() != &quot;&lt;!-- PUT LYRICS
</I>&gt;&gt;<i> HERE (and delete
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; this entire line) --&gt;&quot;:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; + &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;lyrics = re.split(&quot;&lt;lyrics&gt;&quot;,
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; lyricpage)[1].split(&quot;&lt;/lyrics&gt;&quot;)[0]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; + &#160; &#160; &#160; &#160; &#160; &#160;if lyrics.find(&quot;PUT LYRICS HERE&quot;) == -1:
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; + &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;lyrics = lyrics.strip()
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; lyrics = misc.unescape_html(lyrics)
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; lyrics = misc.wiki_to_html(lyrics)
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; lyrics = lyrics.decode(&quot;utf-8&quot;)
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; _______________________________________________
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; Sonata-users mailing list
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A> [8]
</I>&gt;&gt;<i> &gt;&gt; &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A> [9]
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; --
</I>&gt;&gt;<i> &gt;&gt; &gt; Kirill
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;&gt;<i> &gt;&gt; &gt; Sonata-users mailing list
</I>&gt;&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A> [10]
</I>&gt;&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A> [11]
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;&gt;<i> &gt;&gt; Sonata-users mailing list
</I>&gt;&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A> [12]
</I>&gt;&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A> [13]
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Kirill
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; Sonata-users mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A> [14]
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A> [15]
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Sonata-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A> [16]
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A> [17]
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Kirill
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Links:
</I>&gt;<i> ------
</I>&gt;<i> [1] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">kl7.666 at gmail.com</A>
</I>&gt;<i> [2] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">koromilaz at gmail.com</A>
</I>&gt;<i> [3] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">kl7.666 at gmail.com</A>
</I>&gt;<i> [4]
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27S%20Leaving|+|amp|+|action=edit">http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27S%20Leaving|+|amp|+|action=edit</A>
</I>&gt;<i> [5]
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27s%20Leaving|+|amp|+|action=edit">http://lyrics.wikia.com/index.php?title=Orchestral%20Manoeuvres%20In%20The%20Dark:She%27s%20Leaving|+|amp|+|action=edit</A>
</I>&gt;<i> [6] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">koromilaz at gmail.com</A>
</I>&gt;<i> [7] <A HREF="http://lyricwiki.org/index.php?title=%s|+|amp|+|action=edit">http://lyricwiki.org/index.php?title=%s|+|amp|+|action=edit</A>
</I>&gt;<i> [8] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A>
</I>&gt;<i> [9] <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A>
</I>&gt;<i> [10] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A>
</I>&gt;<i> [11] <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A>
</I>&gt;<i> [12] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A>
</I>&gt;<i> [13] <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A>
</I>&gt;<i> [14] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A>
</I>&gt;<i> [15] <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A>
</I>&gt;<i> [16] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">Sonata-users at lists.berlios.de</A>
</I>&gt;<i> [17] <A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">https://lists.berlios.de/mailman/listinfo/sonata-users</A>
</I>&gt;<i> [18] mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/sonata-users">koromilaz at gmail.com</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001255.html">[Sonata-users] Lyricwiki patch
</A></li>
	<LI>Next message: <A HREF="001257.html">[Sonata-users] Translators needed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1256">[ date ]</a>
              <a href="thread.html#1256">[ thread ]</a>
              <a href="subject.html#1256">[ subject ]</a>
              <a href="author.html#1256">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sonata-users">More information about the Sonata-users
mailing list</a><br>
</body></html>
