<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sonata-users] [PATCH] main: fix centering of current song in	current playlist
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sonata-users/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:sonata-users%40lists.berlios.de?Subject=Re%3A%20%5BSonata-users%5D%20%5BPATCH%5D%20main%3A%20fix%20centering%20of%20current%20song%20in%0A%09current%20playlist&In-Reply-To=%3C1253686060-18648-1-git-send-email-bebarino%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001165.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sonata-users] [PATCH] main: fix centering of current song in	current playlist</H1>
    <B>Stephen Boyd</B> 
    <A HREF="mailto:sonata-users%40lists.berlios.de?Subject=Re%3A%20%5BSonata-users%5D%20%5BPATCH%5D%20main%3A%20fix%20centering%20of%20current%20song%20in%0A%09current%20playlist&In-Reply-To=%3C1253686060-18648-1-git-send-email-bebarino%40gmail.com%3E"
       TITLE="[Sonata-users] [PATCH] main: fix centering of current song in	current playlist">bebarino at gmail.com
       </A><BR>
    <I>Wed Sep 23 08:07:40 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001165.html">[Sonata-users] [PATCH] version: migrate to git version generation
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1166">[ date ]</a>
              <a href="thread.html#1166">[ thread ]</a>
              <a href="subject.html#1166">[ subject ]</a>
              <a href="author.html#1166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Previously, the current song would be centered in the current playlist
if the file is different than the previous song's file. It's possible
for duplicate songs to be present in the current playlist, and thus
this test would fail. Instead of using the file, use the song's
position in the playlist.
---

Found this while prepping another series.

 sonata/main.py |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/sonata/main.py b/sonata/main.py
index 4592aba..e533ab7 100644
--- a/sonata/main.py
+++ b/sonata/main.py
@@ -1685,7 +1685,7 @@ class Base(object):
             row = int(self.status['song'])
             self.current.boldrow(row)
             if self.songinfo:
-                if not self.prevsonginfo or mpdh.get(self.songinfo, 'file') != mpdh.get(self.prevsonginfo, 'file'):
+                if not self.prevsonginfo or mpdh.get(self.songinfo, 'pos') != mpdh.get(self.prevsonginfo, 'pos'):
                     self.current.center_song_in_list()
             self.current.prev_boldrow = row
 
-- 
1.6.5.rc1.44.ga1675


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001165.html">[Sonata-users] [PATCH] version: migrate to git version generation
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1166">[ date ]</a>
              <a href="thread.html#1166">[ thread ]</a>
              <a href="subject.html#1166">[ subject ]</a>
              <a href="author.html#1166">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sonata-users">More information about the Sonata-users
mailing list</a><br>
</body></html>
